### 数据库垂直拆分 水平拆分
 当我们使用读写分离、缓存后，数据库的压力还是很大的时候，这就需要使用到数据库拆分了。
        

```
   数据库拆分简单来说，就是指通过某种特定的条件，按照某个维度，将我们存放在同一个数据库中的数据分散存放到多个数据库（主机）上面以达到分散单库（主机）负载的效果。 

  切分模式： 垂直（纵向）拆分、水平拆分。
```


### 垂直拆分
 专库专用

 一个数据库由很多表的构成，每个表对应着不同的业务，垂直切分是指按照业务将表进行分类，分布到不同的数据库上面，这样也就将数据或者说压力分担到不同的库上面

![输入图片说明](https://img-blog.csdn.net/20160910084721525?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center "在这里输入图片标题")

 **垂直拆分的优点是：** 
- 可以使得行数据变小，一个数据块(Block)就能存放更多的数据，在查询时就会减少I/O次数(每次查询时读取的Block 就少)
- 可以达到最大化利用Cache的目的，具体在垂直拆分的时候可以将不常变的字段放一起，将经常改变的放一起
- 数据维护简单

 **缺点是：** 
- 主键出现冗余，需要管理冗余列
- 部分业务表无法join，只能通过接口方式解决，提高了系统复杂度。
- 依然存在单表数据量过大的问题（需要水平拆分）
- 事务处理复杂


### 水平拆分
垂直拆分后遇到单机瓶颈，可以使用水平拆分。相对于垂直拆分的区别是：垂直拆分是把不同的表拆到不同的数据库中，而水平拆分是把同一个表拆到不同的数据库中。

相对于垂直拆分，水平拆分不是将表的数据做分类，而是按照某个字段的某种规则来分散到多个库之中，每个表中包含一部分数据。简单来说，我们可以将数据的水平切分理解为是按照数据行的切分，就是将表中 的某些行切分到一个数据库，而另外的某些行又切分到其他的数据库中，主要有分表，分库两种模式，


 **优点：**       
```
  1. 不存在单库大数据，高并发的性能瓶颈。
  2. 对应用透明，应用端改造较少。     
  3. 按照合理拆分规则拆分，join操作基本避免跨库。
  4. 提高了系统的稳定性跟负载能力。
```


 **缺点：** 
```
 1. 拆分规则难以抽象。
 2. 分片事务一致性难以解决。
 3. 数据多次扩展难度跟维护量极大。
 4. 跨库join性能较差。
```

### 拆分的处理难点
**两张方式共同缺点** 
```
1. 引入分布式事务的问题。
2. 跨节点Join 的问题。
3. 跨节点合并排序分页问题。
```



